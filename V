local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local TweenService = game:GetService("TweenService")

-- Быстрая функция для UI
local function create(class, props, parent)
    local obj = Instance.new(class)
    for k,v in props do obj[k] = v end
    obj.Parent = parent
    return obj
end

-- ScreenGui
local gui = create("ScreenGui", {Name="MainGui", ResetOnSpawn=false}, playerGui)

-- Главное окно
local window = create("Frame", {
    Size=UDim2.new(0,280,0,200),
    Position=UDim2.new(0,10,1,-210),
    BackgroundColor3=Color3.new(1,1,1),
    BackgroundTransparency=0.4,
    BorderSizePixel=0
}, gui)

-- Верхняя плашка с градиентом
local top = create("Frame", {Size=UDim2.new(1,0,0,30), BorderSizePixel=0}, window)
Instance.new("UIGradient", top).Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(128,0,0)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(0,0,0))
}
create("TextLabel", {
    Size=UDim2.new(1,0,1,0), BackgroundTransparency=1,
    Text="Virta Z", TextColor3=Color3.new(1,1,1),
    Font=Enum.Font.Fantasy, TextScaled=true
}, top)

-- Прокрутка для кнопок главного меню
local scroll = create("ScrollingFrame", {
    Size=UDim2.new(1,0,1,-30), Position=UDim2.new(0,0,0,30),
    CanvasSize=UDim2.new(0,0,0,0), ScrollBarThickness=6
}, window)
local layout = Instance.new("UIListLayout", scroll)
layout.Padding = UDim.new(0,5)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
layout.VerticalAlignment = Enum.VerticalAlignment.Top

-- Вкладки
local tabs = {}
local function newTab(name)
    local tab = create("Frame", {
        Size=UDim2.new(1,0,1,0),
        BackgroundColor3=Color3.new(1,1,1),
        BackgroundTransparency=0.4,
        BorderSizePixel=0,
        Visible=false
    }, window)

    local back = create("TextButton", {
        Size=UDim2.new(0,30,0,30), Position=UDim2.new(0,5,0,5),
        BackgroundColor3=Color3.fromRGB(100,100,100),
        Text="<", TextColor3=Color3.new(1,1,1), TextScaled=true
    }, tab)

    back.MouseButton1Click:Connect(function()
        tab.Visible = false
        scroll.Visible = true
        TweenService:Create(window,TweenInfo.new(.3),{Position=UDim2.new(0,10,1,-210)}):Play()
    end)

    tabs[name] = tab
    return tab
end

-- Кнопка открытия вкладки
local function addMainButton(name, openTab)
    local btn = create("TextButton", {
        Size=UDim2.new(0,200,0,40),
        BackgroundColor3=Color3.fromRGB(200,200,200),
        Text=name, TextColor3=Color3.new(0,0,0),
        Font=Enum.Font.Fantasy, TextScaled=true
    }, scroll)
    btn.MouseButton1Click:Connect(function()
        scroll.Visible = false
        openTab.Visible = true
        TweenService:Create(window,TweenInfo.new(.3),{Position=UDim2.new(0,-270,1,-210)}):Play()
    end)
end

-- Вкладка "Позиции"
local poses = newTab("Позиции")
local poseBtn = create("TextButton", {
    Size=UDim2.new(0,160,0,40), Position=UDim2.new(0.5,-80,0,50),
    BackgroundColor3=Color3.fromRGB(240,200,200),
    Text="T-поза", TextColor3=Color3.new(0,0,0),
    Font=Enum.Font.Fantasy, TextScaled=true
}, poses)

local current
poseBtn.MouseButton1Click:Connect(function()
    local char = player.Character or player.CharacterAdded:Wait()
    local hum = char:FindFirstChildOfClass("Humanoid")
    if not hum then return end
    local anim = Instance.new("Animation"); anim.AnimationId="rbxassetid://148840371"
    local track = (hum:FindFirstChildOfClass("Animator") or Instance.new("Animator",hum)):LoadAnimation(anim)
    if current and current.IsPlaying then current:Stop(); current=nil else track:Play(); current=track end
end)

-- Вкладка "Телепорт"
local tp = newTab("Телепорт")
local tpPlayerBox = create("TextBox", {
    Size=UDim2.new(0,160,0,30), Position=UDim2.new(0.5,-80,0,50),
    PlaceholderText="Ник игрока", Text="", TextScaled=true,
    BackgroundColor3=Color3.fromRGB(230,230,255), TextColor3=Color3.new(0,0,0)
}, tp)
local tpPlayerBtn = create("TextButton", {
    Size=UDim2.new(0,30,0,30), Position=UDim2.new(0.5,85,0,50),
    BackgroundColor3=Color3.fromRGB(0,120,255), Text=">", TextScaled=true, TextColor3=Color3.new(1,1,1)
}, tp)

tpPlayerBtn.MouseButton1Click:Connect(function()
    local name = tpPlayerBox.Text:lower()
    for _,plr in ipairs(game.Players:GetPlayers()) do
        if plr.Name:lower():find(name) then
            local root = plr.Character and plr.Character:FindFirstChild("HumanoidRootPart")
            local myRoot = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
            if root and myRoot then myRoot.CFrame = root.CFrame end
            break
        end
    end
end)

-- Координаты игрока над окном
local coords = create("TextLabel", {
    Size=UDim2.new(0,280,0,20),
    Position=UDim2.new(0,10,1,-230),
    BackgroundTransparency=1,
    Text="", TextColor3=Color3.new(0,0,0),
    Font=Enum.Font.Code, TextScaled=true
}, gui)

game:GetService("RunService").RenderStepped:Connect(function()
    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if hrp then
        local pos = hrp.Position
        coords.Text = string.format("X: %.1f  Y: %.1f  Z: %.1f", pos.X,pos.Y,pos.Z)
    end
end)

-- Кнопки в главном меню
addMainButton("Позиции", poses)
addMainButton("Телепорт", tp)

