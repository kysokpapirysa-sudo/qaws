-- Основное окно
local player = game.Players.LocalPlayer
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "VirtaZGui"
gui.ResetOnSpawn = false

local TweenService = game:GetService("TweenService")

-- Функция быстрой сборки объектов
local function create(class, props, parent)
    local obj = Instance.new(class)
    for k,v in pairs(props) do obj[k] = v end
    obj.Parent = parent
    return obj
end

-- Главное окно (снизу слева)
local window = create("Frame", {
    Size = UDim2.new(0, 260, 0, 180),
    Position = UDim2.new(0, 10, 1, -190),
    BackgroundColor3 = Color3.fromRGB(255,255,255),
    BackgroundTransparency = 0.5,
    BorderSizePixel = 0
}, gui)

-- Верхняя плашка с градиентом и названием
local top = create("Frame", {Size=UDim2.new(1,0,0,30), BorderSizePixel=0}, window)
local grad = Instance.new("UIGradient", top)
grad.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(128,0,0)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(0,0,0))
}
create("TextLabel", {
    Size=UDim2.new(1,0,1,0),
    BackgroundTransparency=1,
    Text="Virta Z",
    TextColor3=Color3.new(1,1,1),
    Font=Enum.Font.Fantasy,
    TextScaled=true
}, top)

-- Скроллинг внутри окна
local scroll = create("ScrollingFrame", {
    Size=UDim2.new(1,0,1,-30), Position=UDim2.new(0,0,0,30),
    BackgroundTransparency=1, ScrollBarThickness=6, CanvasSize=UDim2.new(0,0,0,300)
}, window)

-- Кнопки для вкладок
local btnHeight = 40
local function makeBtn(text, y)
    return create("TextButton", {
        Size=UDim2.new(0.9,0,0,btnHeight), Position=UDim2.new(0.05,0,0,y),
        BackgroundColor3=Color3.fromRGB(200,200,200),
        Text=text, TextColor3=Color3.fromRGB(0,0,0),
        Font=Enum.Font.Fantasy, TextScaled=true
    }, scroll)
end

local posesBtn = makeBtn("Позиции персонажа", 0)
local perksBtn = makeBtn("Преимущества", 0.2)
local tpBtn    = makeBtn("Телепорт", 0.4)

-- Вкладки (отдельные страницы)
local tabs = {}
local function makeTab(name)
    local tab = create("Frame", {
        Size=UDim2.new(1,0,1,-30), Position=UDim2.new(0,0,0,30),
        BackgroundTransparency=0.5, Visible=false
    }, window)
    tabs[name] = tab

    -- Кнопка назад
    local back = makeBtn("< Назад", 0)
    back.Parent = tab
    back.MouseButton1Click:Connect(function()
        TweenService:Create(tab, TweenInfo.new(0.3), {Position=UDim2.new(-1,0,0,30)}):Play()
        task.delay(0.3,function() tab.Visible=false; scroll.Visible=true end)
    end)

    return tab
end

local posesTab = makeTab("poses")
local perksTab = makeTab("perks")
local tpTab    = makeTab("teleport")

-- Открытие вкладки
local function openTab(tab)
    scroll.Visible = false
    tab.Visible = true
    tab.Position = UDim2.new(1,0,0,30)
    TweenService:Create(tab, TweenInfo.new(0.3), {Position=UDim2.new(0,0,0,30)}):Play()
end

posesBtn.MouseButton1Click:Connect(function() openTab(posesTab) end)
perksBtn.MouseButton1Click:Connect(function() openTab(perksTab) end)
tpBtn.MouseButton1Click:Connect(function() openTab(tpTab) end)

-- Пример кнопки внутри "Позиции персонажа"
local pose1 = makeBtn("Поза 1", 0.2)
pose1.Parent = posesTab
pose1.MouseButton1Click:Connect(function()
    local hum = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
    if hum then
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://148840371"
        local track = hum:FindFirstChildOfClass("Animator"):LoadAnimation(anim)
        track:Play()
    end
end)

-- Вкладка "Телепорт"
local nameBox = create("TextBox", {
    Size=UDim2.new(0.8,0,0,30), Position=UDim2.new(0.1,0,0.2,0),
    PlaceholderText="Ник игрока", Text="", BackgroundColor3=Color3.fromRGB(230,230,255)
}, tpTab)

local coordBox = create("TextBox", {
    Size=UDim2.new(0.8,0,0,30), Position=UDim2.new(0.1,0,0.4,0),
    PlaceholderText="x,y,z", Text="", BackgroundColor3=Color3.fromRGB(230,230,255)
}, tpTab)

local tpForward = makeBtn("Телепорт вперёд", 0.6)
tpForward.Parent = tpTab
tpForward.MouseButton1Click:Connect(function()
    local char = player.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        char.HumanoidRootPart.CFrame *= CFrame.new(0,0,-4)
    end
end)

